@using System.Text.Json

<div class="array-visualizer">
    @if (Array.Length == 0)
    {
        <div class="text-center text-gray-500 py-8">
            <p>No array to display</p>
        </div>
    }
    else
    {
        <div class="flex flex-wrap gap-2 justify-center">
            @for (int i = 0; i < Array.Length; i++)
            {
                var index = i;
                var elementClass = GetElementClass(index);
                
                <div class="@elementClass">
                    <div class="text-center">
                        <div class="text-lg font-bold">@Array[index]</div>
                        <div class="text-xs text-gray-500">@index</div>
                    </div>
                </div>
            }
        </div>
    }
</div>

@code {
    [Parameter]
    public int[] Array { get; set; } = new int[0];

    [Parameter]
    public List<int> ActiveIndices { get; set; } = new();

    [Parameter]
    public List<int> ComparingIndices { get; set; } = new();

    [Parameter]
    public List<int> SortedIndices { get; set; } = new();

    private string GetElementClass(int index)
    {
        var baseClass = "array-element";
        
        if (SortedIndices.Contains(index))
        {
            return $"{baseClass} array-element-sorted";
        }
        else if (ActiveIndices.Contains(index))
        {
            return $"{baseClass} array-element-active";
        }
        else if (ComparingIndices.Contains(index))
        {
            return $"{baseClass} array-element-comparing";
        }
        
        return baseClass;
    }
} 